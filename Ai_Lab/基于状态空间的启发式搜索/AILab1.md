# 实验报告

先研院电子信息	学号：SA20218099	姓名：罗浩楠

## 实验题目：实现状态空间的启发式搜索

1. 实验目的
   + 理解启发式搜索的概念
   + 掌握状态空间搜索技术

2. 实验内容
   + 使用线程实现M-C问题的搜索

### 状态空间表示法

状态空间表示法是一种基于图的表示方法。一个表示问题的全部可能的状态及其相互关系构成的图。表示为<Qs,F,Qg>

其中Qs为初始状态的集合、F为操作的集合、Qg为目标状态的集合

**问题的解：**

+ 问题的求解过程：在图中寻找出从初始状态Qs出发，到达目标状态Qg的路径，寻找操作序列a
+ 问题的解：
  + 从初始状态到目标状态的路径
  + 本质上为一个操作序列，在这个操作序列的作用下，问题的状态从初始状态能够变化到目标状态
  + 解<Qs,a,Qg>
    + Qs某个初始状态，Qg某个目标状态
    + a为操作序列a1,a2,a3……

### 启发式搜索

+ 定义：在搜索的过程中，应用问题解的有关知识，动态地确定操作规则，优先地扩展最有希望的节点，使搜索更快地朝着目标前进
+ 特点：扩展的节点少，效率高
+ 知识：解在某条路径上出现的频率；当前节点与目标节点差等
+ 搜索的有效性取决于启发式信息的有效性
+ 启发式信息的应用：做成启发式函数，将知识写进函数，用于评论节点的”希望性“

### M-C问题

关于M-C问题，即是missionaries and cannibals问题。题目条件是N个传教士和N个野人（N=5）准备渡河。河岸边有一条船每次最多载K人（K=3）渡河；限制条件是河的左右两岸或者船上的传教士人数均要大于或者等于野人数目（防止传教士被吃掉，所以人多打架力量大）。

 初始有两种情况讨论：1.船在左岸；2.船在右岸；

待用条件：M(传教士人数)，C（野人数）；B=0(船在右岸），B=1（船在左岸）

1.**船在左岸**。因为船每次最多运送3人，所以按照最多运送的人数目进行。当船载3人（划船的1人，乘客2人）从左岸出发到右岸，送下2名乘客后，划船的人将船再次驶向左岸接剩下的3人（5-2）；所以实际上这一次只运送过去了2人。 此时船从左岸出发又回到左岸，为一个来回即是2次；

由此可得一个式子：(（M+C-3）/2)*2+1;*

*分析：M+C-3：出去最后一次之前，岸边剩下的3个人。（M+C-3）/2:  "/2"的原因是每一个来回可以 运行2个人；"*2"是因为一个来回为2次渡河。“+1”是代表着最后一次渡河；

 2.**船在右岸**。

岸边的状态可以用来表示（M,C,B);  B=1代表着船在左岸，B=0代表着船在右岸；

*船在右岸的时候是需要一个人将船驶往左岸的，所以此刻存在两种可能性，划船的人是野人或者传教士。此刻可以用状态的来表示（M+1，C，1），（M，C+1,1）。左岸原有M个传教士，C个野人。(M+C+1)-2+1 。其中(M+C+1)的”＋1”表示送船回到左岸的那个人，而最后边的”＋1”，表示送船到左岸时的一次摆渡。*

**综上所述：M+C-2B满足A*算法的限制条件**

**图例：**

![image-20201219205112774](C:\Users\18304\AppData\Roaming\Typora\typora-user-images\image-20201219205112774.png)

​	其中：

+ 用m表示左岸的修道士人数，c表示左岸的野人数，b表示左岸 的船数，用三元组（m,c,b）表示问题的状态。
+ 对A*算法，首先需要确定评估函数。设 g(n)=d(n),h(n)=m+c-2b,则有
+ f(n)=g(n)+h(n)=d(n)+m+c-2b
+ 其中，d(n)为节点的深度。通过分析可知h (n)<= h*(n),满足 A*算法的限制条件。

## 编程实现

```C++
#include<vector>
#include<algorithm>
#include<stdio.h>
#include<stdlib.h>
#include<fstream>
#include<pthread.h>
#include<iostream>

using namespace std;

#define MAXM 5
#define MAXC 5

typedef struct Node {
	int M, C, B;
	int g, h, f;
	int  parent;//记录父节点在tree中的下标
}Node;

vector<Node> open;
vector<Node> close;
vector<Node> tree;


void show_open() {//显示open表
	vector<Node>::iterator ite;
	ite = open.end() - 1;
	for (; ite >= open.begin(); ite--) {
		printf("(%d,%d,%d,%d,%d,%d)\n", (*ite).M, (*ite).C, (*ite).B, (*ite).g, (*ite).h, (*ite).f);
		//writeintotxt();
		if (ite == open.begin()) break;
	}
}


void show_close() {//显示close表
	vector<Node>::iterator ite;
	ite = close.begin();
	for (; ite < close.end(); ite++) {
		printf("(%d,%d,%d,%d,%d,%d)\n", (*ite).M, (*ite).C, (*ite).B, (*ite).g, (*ite).h, (*ite).f);
	}
}


bool operator ==(Node a, Node b) { // 操作符重写
	return(a.M == b.M && a.C == b.C && a.B == b.B);
}


bool exit_open(Node p) {//判断节点是否存在open表中
	if (find(open.begin(), open.end(), p) == open.end()) return false;
	else return true;
}


bool exit_close(Node p) {//判断节点是否存在close表中
	if (find(close.begin(), close.end(), p) == close.end()) return false;
	else return true;
}


bool comp(Node a, Node b) {
	return a.f > b.f;//根据估价函数值降序排列
}


void add_open(Node p) {//open表添加
	open.push_back(p);
	sort(open.begin(), open.end(), comp);//默认升序排列，这里comp按降序排列
}


void add_close(Node p) {//close表添加
	close.push_back(p);
}


Node boat[8] = {
	{ 0,1,1,0,0,0,-1 },
	{ 0,2,1,0,0,0,-1 },
	{ 0,3,1,0,0,0,-1 },
	{ 1,0,1,0,0,0,-1 },
	{ 1,1,1,0,0,0,-1 },
	{ 2,0,1,0,0,0,-1 },
	{ 2,1,1,0,0,0,-1 },
	{ 3,0,1,0,0,0,-1 }
};

void out_open() {//open表删除
	open.pop_back();
}


bool judge_Node(Node p) {//判断状态p是否合法
	if (p.M > MAXM || p.C > MAXC || p.M < 0 || p.C < 0)//不在范围内。不合法
		return false;
	/*if (((p.M >= p.C) && (MAXM - p.M >= MAXC - p.C)) || (p.M == MAXM) || (p.M == 0))
		return true;
	return false;*/
	else if (p.M != 0 && p.M < p.C)//左岸传教士人数不为0 并且小于野人数
		return false;
	else if (MAXM - p.M != 0 && MAXM - p.M < MAXC - p.C)//右岸传教士人数不为0 error
		return false;
	else return true;
}


void expand(Node p) {//对节点p进行扩展
	Node q;
	printf("************************************************************************************\n");
	printf("\t\t\t对结点: ");
	printf("( %d %d %d )进行扩展\n", p.M, p.C, p.B);
	for (int i = 0; i < 8; i++) {
		if (p.B == 1) {//p船在左岸 
			q.M = p.M - boat[i].M;
			q.C = p.C - boat[i].C;
			q.B = p.B - boat[i].B;
		}
		else {//p船在右岸
			q.M = p.M + boat[i].M;
			q.C = p.C + boat[i].C;
			q.B = p.B + boat[i].B;
		}
		if (judge_Node(q) && !exit_open(q) && !exit_close(q)) {//避免死循环
			q.g = p.g + 1;
			q.h = q.M + q.C - 2 * q.B;
			q.f = q.g + q.h;
			int pos = find(tree.begin(), tree.end(), p) - tree.begin();
			q.parent = pos;
			printf("扩展出新的子结点:");
			printf("(%d,%d,%d,%d,%d,%d)\n", q.M, q.C, q.B, q.g, q.h, q.f);
			add_open(q);
			tree.push_back(q);
		}
		else {
			printf("\t******节点(%d,%d,%d)不满足条件，扩展失败******\n", q.M, q.C, q.B);
		}
	}
	//printf("\t\t=======================================================\n");
	add_close(p);
	printf("\t\t\t\t******open表状态******\n");
	show_open();
	printf("\t\t\t\t******close表状态******\n");

	show_close();
	printf("************************************************************************************\n");
}


bool destination(Node p) {//判断p是否为目标节点
	if (p.M == 0 && p.C == 0 && p.B == 0) return true;
	else return false;
}


Node solve() {
	Node p{ 5, 5, 1, 0, 10, 10,-1 };
	open.push_back(p);
	tree.push_back(p);
	char c;
	Node x;
	while (open.size() != 0) {
		x = *(open.end() - 1);//从open表中取出一个进行扩展
		if (destination(x)) return x;//如果是目标状态  则结束
		out_open();//从open中删除
		expand(x);//扩展该结点
		//getchar();
	}
	//return NULL;
}


void path(Node p) {
	vector<Node> temp;
	while (p.parent != -1) {
		temp.push_back(p);
		p = tree[p.parent];
	}
	temp.push_back(p);
	vector<Node>::iterator ite1 = temp.end() - 1;
	for (; ite1 >= temp.begin(); ite1--) {
		printf("(%d,%d,%d,%d,%d,%d)\n", (*ite1).M, (*ite1).C, (*ite1).B, (*ite1).g, (*ite1).h, (*ite1).f);
		if (ite1 == temp.begin()) break;
	}
}


void* StartSearch(void* args)
{
	Node goal = solve();
	printf("求得M-C问题的解如下所示：\n");
	path(goal);
	cout << "\n\n线程退出......\n" << endl;
	return 0;
}


int main() {
	pthread_t Allthreads[1];
	printf("线程开始......\n");
	int ref = pthread_create(&Allthreads[0], NULL, StartSearch, NULL);
	if (ref != 0)
	{
		cout << "pthread_create error!!!!!!" << endl;
	}
	// 等线程退出后，进程才会结束
	pthread_exit(NULL);
}
```

**Open表与Closed表**

+ 利用知识排序OPEN表中的节点，使最有希望的结点放在Open表的前端

## 运行结果

```
线程开始......
************************************************************************************
                        对结点: ( 5 5 1 )进行扩展
扩展出新的子结点:(5,4,0,1,9,10)
扩展出新的子结点:(5,3,0,1,8,9)
扩展出新的子结点:(5,2,0,1,7,8)
        ******节点(4,5,0)不满足条件，扩展失败******
扩展出新的子结点:(4,4,0,1,8,9)
        ******节点(3,5,0)不满足条件，扩展失败******
        ******节点(3,4,0)不满足条件，扩展失败******
        ******节点(2,5,0)不满足条件，扩展失败******
                                ******open表状态******
(5,2,0,1,7,8)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(5,4,0,1,9,10)
                                ******close表状态******
(5,5,1,0,10,10)
************************************************************************************
************************************************************************************
                        对结点: ( 5 2 0 )进行扩展
扩展出新的子结点:(5,3,1,2,6,8)
扩展出新的子结点:(5,4,1,2,7,9)
        ******节点(5,5,1)不满足条件，扩展失败******
        ******节点(6,2,1)不满足条件，扩展失败******
        ******节点(6,3,1)不满足条件，扩展失败******
        ******节点(7,2,1)不满足条件，扩展失败******
        ******节点(7,3,1)不满足条件，扩展失败******
        ******节点(8,2,1)不满足条件，扩展失败******
                                ******open表状态******
(5,3,1,2,6,8)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(5,4,0,1,9,10)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
************************************************************************************
************************************************************************************
                        对结点: ( 5 3 1 )进行扩展
        ******节点(5,2,0)不满足条件，扩展失败******
扩展出新的子结点:(5,1,0,3,6,9)
扩展出新的子结点:(5,0,0,3,5,8)
        ******节点(4,3,0)不满足条件，扩展失败******
        ******节点(4,2,0)不满足条件，扩展失败******
扩展出新的子结点:(3,3,0,3,6,9)
        ******节点(3,2,0)不满足条件，扩展失败******
        ******节点(2,3,0)不满足条件，扩展失败******
                                ******open表状态******
(5,0,0,3,5,8)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(5,4,0,1,9,10)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
************************************************************************************
************************************************************************************
                        对结点: ( 5 0 0 )进行扩展
扩展出新的子结点:(5,1,1,4,4,8)
扩展出新的子结点:(5,2,1,4,5,9)
        ******节点(5,3,1)不满足条件，扩展失败******
        ******节点(6,0,1)不满足条件，扩展失败******
        ******节点(6,1,1)不满足条件，扩展失败******
        ******节点(7,0,1)不满足条件，扩展失败******
        ******节点(7,1,1)不满足条件，扩展失败******
        ******节点(8,0,1)不满足条件，扩展失败******
                                ******open表状态******
(5,1,1,4,4,8)
(5,2,1,4,5,9)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(5,4,0,1,9,10)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
************************************************************************************
************************************************************************************
                        对结点: ( 5 1 1 )进行扩展
        ******节点(5,0,0)不满足条件，扩展失败******
        ******节点(5,-1,0)不满足条件，扩展失败******
        ******节点(5,-2,0)不满足条件，扩展失败******
        ******节点(4,1,0)不满足条件，扩展失败******
        ******节点(4,0,0)不满足条件，扩展失败******
        ******节点(3,1,0)不满足条件，扩展失败******
        ******节点(3,0,0)不满足条件，扩展失败******
        ******节点(2,1,0)不满足条件，扩展失败******
                                ******open表状态******
(5,2,1,4,5,9)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(5,4,0,1,9,10)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
************************************************************************************
************************************************************************************
                        对结点: ( 5 2 1 )进行扩展
        ******节点(5,1,0)不满足条件，扩展失败******
        ******节点(5,0,0)不满足条件，扩展失败******
        ******节点(5,-1,0)不满足条件，扩展失败******
        ******节点(4,2,0)不满足条件，扩展失败******
        ******节点(4,1,0)不满足条件，扩展失败******
        ******节点(3,2,0)不满足条件，扩展失败******
        ******节点(3,1,0)不满足条件，扩展失败******
扩展出新的子结点:(2,2,0,5,4,9)
                                ******open表状态******
(2,2,0,5,4,9)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(5,4,0,1,9,10)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
(5,2,1,4,5,9)
************************************************************************************
************************************************************************************
                        对结点: ( 2 2 0 )进行扩展
        ******节点(2,3,1)不满足条件，扩展失败******
        ******节点(2,4,1)不满足条件，扩展失败******
        ******节点(2,5,1)不满足条件，扩展失败******
        ******节点(3,2,1)不满足条件，扩展失败******
扩展出新的子结点:(3,3,1,6,4,10)
        ******节点(4,2,1)不满足条件，扩展失败******
        ******节点(4,3,1)不满足条件，扩展失败******
        ******节点(5,2,1)不满足条件，扩展失败******
                                ******open表状态******
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(3,3,1,6,4,10)
(5,4,0,1,9,10)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
(5,2,1,4,5,9)
(2,2,0,5,4,9)
************************************************************************************
************************************************************************************
                        对结点: ( 3 3 0 )进行扩展
        ******节点(3,4,1)不满足条件，扩展失败******
        ******节点(3,5,1)不满足条件，扩展失败******
        ******节点(3,6,1)不满足条件，扩展失败******
        ******节点(4,3,1)不满足条件，扩展失败******
扩展出新的子结点:(4,4,1,4,6,10)
        ******节点(5,3,1)不满足条件，扩展失败******
        ******节点(5,4,1)不满足条件，扩展失败******
        ******节点(6,3,1)不满足条件，扩展失败******
                                ******open表状态******
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(4,4,1,4,6,10)
(3,3,1,6,4,10)
(5,4,0,1,9,10)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
(5,2,1,4,5,9)
(2,2,0,5,4,9)
(3,3,0,3,6,9)
************************************************************************************
************************************************************************************
                        对结点: ( 5 1 0 )进行扩展
        ******节点(5,2,1)不满足条件，扩展失败******
        ******节点(5,3,1)不满足条件，扩展失败******
        ******节点(5,4,1)不满足条件，扩展失败******
        ******节点(6,1,1)不满足条件，扩展失败******
        ******节点(6,2,1)不满足条件，扩展失败******
        ******节点(7,1,1)不满足条件，扩展失败******
        ******节点(7,2,1)不满足条件，扩展失败******
        ******节点(8,1,1)不满足条件，扩展失败******
                                ******open表状态******
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(4,4,1,4,6,10)
(3,3,1,6,4,10)
(5,4,0,1,9,10)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
(5,2,1,4,5,9)
(2,2,0,5,4,9)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
************************************************************************************
************************************************************************************
                        对结点: ( 5 4 1 )进行扩展
        ******节点(5,3,0)不满足条件，扩展失败******
        ******节点(5,2,0)不满足条件，扩展失败******
        ******节点(5,1,0)不满足条件，扩展失败******
        ******节点(4,4,0)不满足条件，扩展失败******
        ******节点(4,3,0)不满足条件，扩展失败******
        ******节点(3,4,0)不满足条件，扩展失败******
        ******节点(3,3,0)不满足条件，扩展失败******
        ******节点(2,4,0)不满足条件，扩展失败******
                                ******open表状态******
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(4,4,1,4,6,10)
(3,3,1,6,4,10)
(5,4,0,1,9,10)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
(5,2,1,4,5,9)
(2,2,0,5,4,9)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
************************************************************************************
************************************************************************************
                        对结点: ( 4 4 0 )进行扩展
        ******节点(4,5,1)不满足条件，扩展失败******
        ******节点(4,6,1)不满足条件，扩展失败******
        ******节点(4,7,1)不满足条件，扩展失败******
        ******节点(5,4,1)不满足条件，扩展失败******
        ******节点(5,5,1)不满足条件，扩展失败******
        ******节点(6,4,1)不满足条件，扩展失败******
        ******节点(6,5,1)不满足条件，扩展失败******
        ******节点(7,4,1)不满足条件，扩展失败******
                                ******open表状态******
(5,3,0,1,8,9)
(4,4,1,4,6,10)
(3,3,1,6,4,10)
(5,4,0,1,9,10)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
(5,2,1,4,5,9)
(2,2,0,5,4,9)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
************************************************************************************
************************************************************************************
                        对结点: ( 5 3 0 )进行扩展
        ******节点(5,4,1)不满足条件，扩展失败******
        ******节点(5,5,1)不满足条件，扩展失败******
        ******节点(5,6,1)不满足条件，扩展失败******
        ******节点(6,3,1)不满足条件，扩展失败******
        ******节点(6,4,1)不满足条件，扩展失败******
        ******节点(7,3,1)不满足条件，扩展失败******
        ******节点(7,4,1)不满足条件，扩展失败******
        ******节点(8,3,1)不满足条件，扩展失败******
                                ******open表状态******
(4,4,1,4,6,10)
(3,3,1,6,4,10)
(5,4,0,1,9,10)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
(5,2,1,4,5,9)
(2,2,0,5,4,9)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
************************************************************************************
************************************************************************************
                        对结点: ( 4 4 1 )进行扩展
        ******节点(4,3,0)不满足条件，扩展失败******
        ******节点(4,2,0)不满足条件，扩展失败******
        ******节点(4,1,0)不满足条件，扩展失败******
        ******节点(3,4,0)不满足条件，扩展失败******
        ******节点(3,3,0)不满足条件，扩展失败******
        ******节点(2,4,0)不满足条件，扩展失败******
        ******节点(2,3,0)不满足条件，扩展失败******
        ******节点(1,4,0)不满足条件，扩展失败******
                                ******open表状态******
(3,3,1,6,4,10)
(5,4,0,1,9,10)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
(5,2,1,4,5,9)
(2,2,0,5,4,9)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(4,4,1,4,6,10)
************************************************************************************
************************************************************************************
                        对结点: ( 3 3 1 )进行扩展
        ******节点(3,2,0)不满足条件，扩展失败******
        ******节点(3,1,0)不满足条件，扩展失败******
        ******节点(3,0,0)不满足条件，扩展失败******
        ******节点(2,3,0)不满足条件，扩展失败******
        ******节点(2,2,0)不满足条件，扩展失败******
        ******节点(1,3,0)不满足条件，扩展失败******
        ******节点(1,2,0)不满足条件，扩展失败******
扩展出新的子结点:(0,3,0,7,3,10)
                                ******open表状态******
(0,3,0,7,3,10)
(5,4,0,1,9,10)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
(5,2,1,4,5,9)
(2,2,0,5,4,9)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(4,4,1,4,6,10)
(3,3,1,6,4,10)
************************************************************************************
************************************************************************************
                        对结点: ( 0 3 0 )进行扩展
扩展出新的子结点:(0,4,1,8,2,10)
扩展出新的子结点:(0,5,1,8,3,11)
        ******节点(0,6,1)不满足条件，扩展失败******
        ******节点(1,3,1)不满足条件，扩展失败******
        ******节点(1,4,1)不满足条件，扩展失败******
        ******节点(2,3,1)不满足条件，扩展失败******
        ******节点(2,4,1)不满足条件，扩展失败******
        ******节点(3,3,1)不满足条件，扩展失败******
                                ******open表状态******
(0,4,1,8,2,10)
(5,4,0,1,9,10)
(0,5,1,8,3,11)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
(5,2,1,4,5,9)
(2,2,0,5,4,9)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(4,4,1,4,6,10)
(3,3,1,6,4,10)
(0,3,0,7,3,10)
************************************************************************************
************************************************************************************
                        对结点: ( 0 4 1 )进行扩展
        ******节点(0,3,0)不满足条件，扩展失败******
扩展出新的子结点:(0,2,0,9,2,11)
扩展出新的子结点:(0,1,0,9,1,10)
        ******节点(-1,4,0)不满足条件，扩展失败******
        ******节点(-1,3,0)不满足条件，扩展失败******
        ******节点(-2,4,0)不满足条件，扩展失败******
        ******节点(-2,3,0)不满足条件，扩展失败******
        ******节点(-3,4,0)不满足条件，扩展失败******
                                ******open表状态******
(0,1,0,9,1,10)
(5,4,0,1,9,10)
(0,2,0,9,2,11)
(0,5,1,8,3,11)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
(5,2,1,4,5,9)
(2,2,0,5,4,9)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(4,4,1,4,6,10)
(3,3,1,6,4,10)
(0,3,0,7,3,10)
(0,4,1,8,2,10)
************************************************************************************
************************************************************************************
                        对结点: ( 0 1 0 )进行扩展
扩展出新的子结点:(0,2,1,10,0,10)
扩展出新的子结点:(0,3,1,10,1,11)
        ******节点(0,4,1)不满足条件，扩展失败******
扩展出新的子结点:(1,1,1,10,0,10)
        ******节点(1,2,1)不满足条件，扩展失败******
        ******节点(2,1,1)不满足条件，扩展失败******
扩展出新的子结点:(2,2,1,10,2,12)
        ******节点(3,1,1)不满足条件，扩展失败******
                                ******open表状态******
(1,1,1,10,0,10)
(0,2,1,10,0,10)
(5,4,0,1,9,10)
(0,3,1,10,1,11)
(0,2,0,9,2,11)
(0,5,1,8,3,11)
(2,2,1,10,2,12)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
(5,2,1,4,5,9)
(2,2,0,5,4,9)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(4,4,1,4,6,10)
(3,3,1,6,4,10)
(0,3,0,7,3,10)
(0,4,1,8,2,10)
(0,1,0,9,1,10)
************************************************************************************
************************************************************************************
                        对结点: ( 1 1 1 )进行扩展
        ******节点(1,0,0)不满足条件，扩展失败******
        ******节点(1,-1,0)不满足条件，扩展失败******
        ******节点(1,-2,0)不满足条件，扩展失败******
        ******节点(0,1,0)不满足条件，扩展失败******
扩展出新的子结点:(0,0,0,11,0,11)
        ******节点(-1,1,0)不满足条件，扩展失败******
        ******节点(-1,0,0)不满足条件，扩展失败******
        ******节点(-2,1,0)不满足条件，扩展失败******
                                ******open表状态******
(0,2,1,10,0,10)
(5,4,0,1,9,10)
(0,0,0,11,0,11)
(0,3,1,10,1,11)
(0,2,0,9,2,11)
(0,5,1,8,3,11)
(2,2,1,10,2,12)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
(5,2,1,4,5,9)
(2,2,0,5,4,9)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(4,4,1,4,6,10)
(3,3,1,6,4,10)
(0,3,0,7,3,10)
(0,4,1,8,2,10)
(0,1,0,9,1,10)
(1,1,1,10,0,10)
************************************************************************************
************************************************************************************
                        对结点: ( 0 2 1 )进行扩展
        ******节点(0,1,0)不满足条件，扩展失败******
        ******节点(0,0,0)不满足条件，扩展失败******
        ******节点(0,-1,0)不满足条件，扩展失败******
        ******节点(-1,2,0)不满足条件，扩展失败******
        ******节点(-1,1,0)不满足条件，扩展失败******
        ******节点(-2,2,0)不满足条件，扩展失败******
        ******节点(-2,1,0)不满足条件，扩展失败******
        ******节点(-3,2,0)不满足条件，扩展失败******
                                ******open表状态******
(5,4,0,1,9,10)
(0,0,0,11,0,11)
(0,3,1,10,1,11)
(0,2,0,9,2,11)
(0,5,1,8,3,11)
(2,2,1,10,2,12)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
(5,2,1,4,5,9)
(2,2,0,5,4,9)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(4,4,1,4,6,10)
(3,3,1,6,4,10)
(0,3,0,7,3,10)
(0,4,1,8,2,10)
(0,1,0,9,1,10)
(1,1,1,10,0,10)
(0,2,1,10,0,10)
************************************************************************************
************************************************************************************
                        对结点: ( 5 4 0 )进行扩展
        ******节点(5,5,1)不满足条件，扩展失败******
        ******节点(5,6,1)不满足条件，扩展失败******
        ******节点(5,7,1)不满足条件，扩展失败******
        ******节点(6,4,1)不满足条件，扩展失败******
        ******节点(6,5,1)不满足条件，扩展失败******
        ******节点(7,4,1)不满足条件，扩展失败******
        ******节点(7,5,1)不满足条件，扩展失败******
        ******节点(8,4,1)不满足条件，扩展失败******
                                ******open表状态******
(0,0,0,11,0,11)
(0,3,1,10,1,11)
(0,2,0,9,2,11)
(0,5,1,8,3,11)
(2,2,1,10,2,12)
                                ******close表状态******
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,1,1,4,4,8)
(5,2,1,4,5,9)
(2,2,0,5,4,9)
(3,3,0,3,6,9)
(5,1,0,3,6,9)
(5,4,1,2,7,9)
(4,4,0,1,8,9)
(5,3,0,1,8,9)
(4,4,1,4,6,10)
(3,3,1,6,4,10)
(0,3,0,7,3,10)
(0,4,1,8,2,10)
(0,1,0,9,1,10)
(1,1,1,10,0,10)
(0,2,1,10,0,10)
(5,4,0,1,9,10)
************************************************************************************
求得M-C问题的解如下所示：
(5,5,1,0,10,10)
(5,2,0,1,7,8)
(5,3,1,2,6,8)
(5,0,0,3,5,8)
(5,2,1,4,5,9)
(2,2,0,5,4,9)
(3,3,1,6,4,10)
(0,3,0,7,3,10)
(0,4,1,8,2,10)
(0,1,0,9,1,10)
(1,1,1,10,0,10)
(0,0,0,11,0,11)


线程退出......
```

其中每个stuct有（M,C,B,g,h,f）

分别表示：M传教士人数

​				  C野人数

​				  B在左侧-0，在右侧-1

​				  g当前结点所在解空间树深度

​				  h到目标节点的距离

​				  f 启发函数值

![image-20201219211818448](C:\Users\18304\AppData\Roaming\Typora\typora-user-images\image-20201219211818448.png)

这个示例模拟了（5,5,1,0,10,10）M-C问题的求解。

如下为（5, 4, 1, 0, 10, 10）的解：

![image-20201219212006212](C:\Users\18304\AppData\Roaming\Typora\typora-user-images\image-20201219212006212.png)

![image-20201219212019150](C:\Users\18304\AppData\Roaming\Typora\typora-user-images\image-20201219212019150.png)

## 环境

操作系统：Window10 专业版

​				  Visual Studio 2019 community



